<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<!-- Add to <head> or before closing </body> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
<link href="https://fonts.googleapis.com/css2?family=Russo+One&display=swap" rel="stylesheet">

<title>Agentic AI â€“ Corporate Cloud Assistant</title>

</head>
<body>
<header class="top-header">
  <div class="left-controls">

    <span id="toggle-history" onclick="toggleSidebar()" title="Toggle Chat History">
      ğŸ“œ
    </span>
    <span id="new-chat" onclick="startNewChat()" title="Start New Chat">
      ğŸ†•
    </span>
        <span id="toggleMetrics" title="Toggle Metrics" onclick="toggleMetrics()">
      ğŸ“Š
        </span>
  </div>
  
  <div class="logo-title">
    <img src="{{ url_for('static', filename='wrangler.jpg') }}" alt="Cloud Wrangler" />
    <h1>CLOUD WRANGLER</h1>
  </div>

  <nav class="top-nav">
    <a href="/">Home</a>
    <a href="/uploads">Docs</a>
  </nav>
</header>
<div class="container">
<!-- <h1 id="title-style">Cloud Migration Chat Assistant</h1> -->
<div class="tabs">
<button class="tab-button active" onclick="switchTab('chatTab', this)">ğŸ’¬ Chat</button>
<!-- <button class="tab-button" onclick="switchTab('docsTab', this)">ğŸ“‚ View Docs</button> -->
<button class="tab-button" onclick="switchTab('uploadTab', this)">ğŸ“¤ Upload Docs</button>
<!-- <button class="tab-button" onclick="switchTab('metricsTab', this)">ğŸ“Š Metrics</button> -->

</div> 
<div id="metrics-dashboard" class="metrics-box"> 
  <h3>ğŸ“Š Migration Activity Metrics</h3>
  <div class="metric-row">
    <button class="metric-button" onclick="location.href='/plans'">
      ğŸ“ <strong>Plans Generated:</strong> <span id="plansCount">0</span>
    </button>
    <button class="metric-button" onclick="location.href='/uploads'">
      ğŸ“‚ <strong>Documents Uploaded:</strong> <span id="docsCount">0</span>
    </button>
  </div>
</div>
<div id="chatTab" class="tab-content active collapsed">
  <!-- Sidebar -->
<div id="sidebar">
  <h3>ğŸ•˜ Chat History</h3>
  <ul id="chat-history" style="list-style: none; padding-left: 0;"></ul>
</div>
  <div style="flex: 1;">
<!-- Chat Window -->
<div id="chat">
<div class="callout">
<strong>ğŸ¤– Welcome to Agentic AI!</strong>
<p>
        Iâ€™m your cloud migration assistant. I can:
</p>
        <ul>
<li>Generate 3-year AWS &amp; Azure migration plans</li>
<li>Prioritize workloads based on complexity</li>
<li>Answer questions based on your uploaded documents</li>
</ul>
        Type a question or select a suggested prompt to begin.
      </div>
</div>
<!-- Planner agent -->
<div id="agentic-response" style="display: none; margin-top: 20px;">
<div class="planner-card">
<div class="planner-header">ğŸ§  Planner Agent Response</div>
<div class="planner-body" id="planner-content">
<em>Loading plan...</em>
</div>
</div>
</div>
<div id="suggestions">
<span class="bubble" onclick="setInput('Generate a 3-year AWS and Azure migration plan')">ğŸ’¡ Generate migration plan</span>
<span class="bubble" onclick="setInput('Which workloads should I migrate first based on complexity?')">ğŸ§© Prioritize workloads</span>
<span class="bubble" onclick="setInput('Summarize the key points from the uploaded infrastructure docs')">ğŸ§  Summarize infrastructure</span>
</div>
<div class="ux-hint">ğŸ’¬ Ask anything â€“ Iâ€™ll route your message to the right assistant.</div>
<textarea id="input" placeholder="Ask your migration assistant." rows="4"></textarea>
<button class="send" onclick="send()" title="Use for any task like 'Generate a migration plan', 'Summarize documents', etc.">Send</button>
<button class="send" onclick="downloadPlan()" style="background: #eee; color: #1657c2; border: 1px solid #1657c2; float: left;">ğŸ“¥ Download Chat</button>
<button class="send" onclick="downloadPDF()" style="background: #eee; color: #1657c2; border: 1px solid #1657c2; float: left; margin-right: 10px; visibility: hidden;">
  ğŸ“ Export as PDF
</button>

<div style="clear: both;"></div>
</div>
</div>
<div class="tab-content" id="docsTab">
<div id="docs">ğŸ“„ Loading document previews...</div>
</div>
<div class="tab-content" id="uploadTab">
  <div class="upload-box">
    <h3>ğŸ“¤ Upload Infrastructure Documents</h3>

    <div class="upload-container">
      <form id="uploadForm" enctype="multipart/form-data">
          <button type="submit" class="send upload-btn">â¬†ï¸ Upload Selected</button>
          <!-- Upload Individual Files -->
  <label for="fileUploadFiles" class="upload-label">ğŸ“„ Upload Files</label>
  <input type="file" id="fileUploadFiles" name="file" multiple style="display:none;color: black;">

  <!-- Upload Folder -->
  <label for="fileUploadFolder" class="upload-label">ğŸ“ Upload Folder</label>
  <input type="file" id="fileUploadFolder" name="file" multiple webkitdirectory directory style="display:none;color: black;">

        <div id="fileList" class="file-list" style="color: black;"></div>

        <div class="matrix-display" id="uploadStatus"></div>



        <p id="upload-msg"></p>
      </form>
    </div>
  </div>
</div>


<div class="tab-content" id="metricsTab">
  <div class="upload-box">
    <h3>ğŸ“ˆ Migration Metrics</h3>
    <ul id="metricsList" style="font-size: 1.1rem; line-height: 1.8;">
      <li>ğŸ“„ Documents Uploaded: <strong id="docsUploaded">0</strong></li>
      <li>ğŸ“¦ Migration Plans Generated: <strong id="plansGenerated">0</strong></li>
      <li>ğŸ’¬ User Messages: <strong id="userMessages">0</strong></li>
    </ul>
    <button onclick="refreshMetrics()">ğŸ”„ Refresh Metrics</button>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script src="{{ url_for('static', filename='main.js') }}"></script>

</body>
</html>
